<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Slack (whatwhat.Whatwhat.Slack)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">whatwhat</a> &#x00BB; <a href="../index.html">Whatwhat</a> &#x00BB; Slack</nav><header class="odoc-preamble"><h1>Module <code><span>Whatwhat.Slack</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Basic"><a href="#module-Basic" class="anchor"></a><code><span><span class="keyword">module</span> Basic</span><span> = <span class="xref-unresolved">Yojson</span>.Basic</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-SlackAPIError"><a href="#exception-SlackAPIError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">SlackAPIError</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-ParseFailed"><a href="#exception-ParseFailed" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">ParseFailed</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_response"><a href="#val-check_response" class="anchor"></a><code><span><span class="keyword">val</span> check_response : <span><span>(<span class="xref-unresolved">Cohttp</span>.Response.t * <span class="xref-unresolved">Cohttp_lwt</span>.Body.t)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-message"><a href="#type-message" class="anchor"></a><code><span><span class="keyword">type</span> message</span><span> = </span><span>{</span></code><ol><li id="type-message.envelope_id" class="def record field anchored"><a href="#type-message.envelope_id" class="anchor"></a><code><span>envelope_id : string;</span></code></li><li id="type-message.text" class="def record field anchored"><a href="#type-message.text" class="anchor"></a><code><span>text : string;</span></code></li><li id="type-message.user" class="def record field anchored"><a href="#type-message.user" class="anchor"></a><code><span>user : string;</span></code></li><li id="type-message.channel" class="def record field anchored"><a href="#type-message.channel" class="anchor"></a><code><span>channel : string;</span></code></li><li id="type-message.timestamp" class="def record field anchored"><a href="#type-message.timestamp" class="anchor"></a><code><span>timestamp : string;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_message"><a href="#val-pp_message" class="anchor"></a><code><span><span class="keyword">val</span> pp_message : 
  <span><span class="xref-unresolved">Ppx_deriving_runtime</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-message">message</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppx_deriving_runtime</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_message"><a href="#val-show_message" class="anchor"></a><code><span><span class="keyword">val</span> show_message : <span><a href="#type-message">message</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppx_deriving_runtime</span>.string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-slash_command"><a href="#type-slash_command" class="anchor"></a><code><span><span class="keyword">type</span> slash_command</span><span> = </span><span>{</span></code><ol><li id="type-slash_command.envelope_id" class="def record field anchored"><a href="#type-slash_command.envelope_id" class="anchor"></a><code><span>envelope_id : string;</span></code></li><li id="type-slash_command.channel_id" class="def record field anchored"><a href="#type-slash_command.channel_id" class="anchor"></a><code><span>channel_id : string;</span></code></li><li id="type-slash_command.user_id" class="def record field anchored"><a href="#type-slash_command.user_id" class="anchor"></a><code><span>user_id : string;</span></code></li><li id="type-slash_command.command" class="def record field anchored"><a href="#type-slash_command.command" class="anchor"></a><code><span>command : string;</span></code></li><li id="type-slash_command.text" class="def record field anchored"><a href="#type-slash_command.text" class="anchor"></a><code><span>text : string;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_slash_command"><a href="#val-pp_slash_command" class="anchor"></a><code><span><span class="keyword">val</span> pp_slash_command : 
  <span><span class="xref-unresolved">Ppx_deriving_runtime</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-slash_command">slash_command</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppx_deriving_runtime</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_slash_command"><a href="#val-show_slash_command" class="anchor"></a><code><span><span class="keyword">val</span> show_slash_command : <span><a href="#type-slash_command">slash_command</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppx_deriving_runtime</span>.string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-slack_event"><a href="#type-slack_event" class="anchor"></a><code><span><span class="keyword">type</span> slack_event</span><span> = </span></code><ol><li id="type-slack_event.Ping" class="def variant constructor anchored"><a href="#type-slack_event.Ping" class="anchor"></a><code><span>| </span><span><span class="constructor">Ping</span></span></code></li><li id="type-slack_event.Hello" class="def variant constructor anchored"><a href="#type-slack_event.Hello" class="anchor"></a><code><span>| </span><span><span class="constructor">Hello</span> <span class="keyword">of</span> int</span></code></li><li id="type-slack_event.Message" class="def variant constructor anchored"><a href="#type-slack_event.Message" class="anchor"></a><code><span>| </span><span><span class="constructor">Message</span> <span class="keyword">of</span> <a href="#type-message">message</a></span></code></li><li id="type-slack_event.PingMessage" class="def variant constructor anchored"><a href="#type-slack_event.PingMessage" class="anchor"></a><code><span>| </span><span><span class="constructor">PingMessage</span> <span class="keyword">of</span> <a href="#type-message">message</a></span></code></li><li id="type-slack_event.SlashCommand" class="def variant constructor anchored"><a href="#type-slack_event.SlashCommand" class="anchor"></a><code><span>| </span><span><span class="constructor">SlashCommand</span> <span class="keyword">of</span> <a href="#type-slash_command">slash_command</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_slack_event"><a href="#val-pp_slack_event" class="anchor"></a><code><span><span class="keyword">val</span> pp_slack_event : 
  <span><span class="xref-unresolved">Ppx_deriving_runtime</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-slack_event">slack_event</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppx_deriving_runtime</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_slack_event"><a href="#val-show_slack_event" class="anchor"></a><code><span><span class="keyword">val</span> show_slack_event : <span><a href="#type-slack_event">slack_event</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppx_deriving_runtime</span>.string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_as_slash_command"><a href="#val-parse_as_slash_command" class="anchor"></a><code><span><span class="keyword">val</span> parse_as_slash_command : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-slack_event">slack_event</a></span></code></div><div class="spec-doc"><p>Parse frame as a slash command</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_as_message"><a href="#val-parse_as_message" class="anchor"></a><code><span><span class="keyword">val</span> parse_as_message : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-slack_event">slack_event</a></span></code></div><div class="spec-doc"><p>Parse frame as a message</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_as_pingmessage"><a href="#val-parse_as_pingmessage" class="anchor"></a><code><span><span class="keyword">val</span> parse_as_pingmessage : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-slack_event">slack_event</a></span></code></div><div class="spec-doc"><p>Parse frame as a ping-message</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_as_hello"><a href="#val-parse_as_hello" class="anchor"></a><code><span><span class="keyword">val</span> parse_as_hello : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-slack_event">slack_event</a></span></code></div><div class="spec-doc"><p>Parse frame as hello</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_as_ping"><a href="#val-parse_as_ping" class="anchor"></a><code><span><span class="keyword">val</span> parse_as_ping : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-slack_event">slack_event</a></span></code></div><div class="spec-doc"><p>Parse frame as a ping</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_frame"><a href="#val-parse_frame" class="anchor"></a><code><span><span class="keyword">val</span> parse_frame : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-slack_event">slack_event</a></span></code></div><div class="spec-doc"><p>Attempt to parse a WebSocket frame as a Slack event.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_frame_json"><a href="#val-print_frame_json" class="anchor"></a><code><span><span class="keyword">val</span> print_frame_json : <span><span class="xref-unresolved">Websocket</span>.Frame.t <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Print JSON contents of a frame to standard output.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pong"><a href="#val-pong" class="anchor"></a><code><span><span class="keyword">val</span> pong : <span><span class="xref-unresolved">Websocket_lwt_unix</span>.conn <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-post_message"><a href="#val-post_message" class="anchor"></a><code><span><span class="keyword">val</span> post_message : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_reaction"><a href="#val-add_reaction" class="anchor"></a><code><span><span class="keyword">val</span> add_reaction : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_current_user"><a href="#val-get_current_user" class="anchor"></a><code><span><span class="keyword">val</span> get_current_user : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_username"><a href="#val-get_username" class="anchor"></a><code><span><span class="keyword">val</span> get_username : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-return_envelope"><a href="#val-return_envelope" class="anchor"></a><code><span><span class="keyword">val</span> return_envelope : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Websocket_lwt_unix</span>.conn <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-acknowledge_event"><a href="#val-acknowledge_event" class="anchor"></a><code><span><span class="keyword">val</span> acknowledge_event : <span><span class="xref-unresolved">Websocket_lwt_unix</span>.conn <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-slack_event">slack_event</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handle_event"><a href="#val-handle_event" class="anchor"></a><code><span><span class="keyword">val</span> handle_event : 
  <span><span class="xref-unresolved">Websocket_lwt_unix</span>.conn <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-slack_event">slack_event</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getWebsocketUrl"><a href="#val-getWebsocketUrl" class="anchor"></a><code><span><span class="keyword">val</span> getWebsocketUrl : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Uri</span>.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Obtain the web socket URL from Slack, using an app-level token. This URL will be the one used for communication.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-connect_websocket"><a href="#val-connect_websocket" class="anchor"></a><code><span><span class="keyword">val</span> connect_websocket : <span><span class="xref-unresolved">Uri</span>.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Websocket_lwt_unix</span>.conn <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Connect to the websocket URL and return an open websocket connection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_bot"><a href="#val-run_bot" class="anchor"></a><code><span><span class="keyword">val</span> run_bot : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>