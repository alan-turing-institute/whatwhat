<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Utils (whatwhat.Whatwhat.Utils)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">whatwhat</a> &#x00BB; <a href="../index.html">Whatwhat</a> &#x00BB; Utils</nav><header class="odoc-preamble"><h1>Module <code><span>Whatwhat.Utils</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-HttpError"><a href="#exception-HttpError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">HttpError</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-GithubRateLimitError"><a href="#exception-GithubRateLimitError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">GithubRateLimitError</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-date"><a href="#type-date" class="anchor"></a><code><span><span class="keyword">type</span> date</span><span> = <span class="xref-unresolved">CalendarLib</span>.Date.t</span></code></div><div class="spec-doc"><p>Redefine date type (and provide a pretty-printing function in order to cleanly derive <code>show</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_date"><a href="#val-pp_date" class="anchor"></a><code><span><span class="keyword">val</span> pp_date : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">CalendarLib</span>.Printer.Date.t <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-date_of_string"><a href="#val-date_of_string" class="anchor"></a><code><span><span class="keyword">val</span> date_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="xref-unresolved">CalendarLib</span>.Date.t, unit)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Parse a string as a date in the format year-month-day. If the string is not in this format, return <code>Error ()</code>, else <code>Ok date</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_http_response"><a href="#val-check_http_response" class="anchor"></a><code><span><span class="keyword">val</span> check_http_response : <span><span class="xref-unresolved">Cohttp</span>.Response.t <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Raise an appropriate error if the API request response indicates failure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_opt"><a href="#val-show_opt" class="anchor"></a><code><span><span class="keyword">val</span> show_opt : <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Print an option type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_digit"><a href="#val-is_digit" class="anchor"></a><code><span><span class="keyword">val</span> is_digit : <span>char <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a character is a digit, i.e. <code>0-9</code> *</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_date"><a href="#val-parse_date" class="anchor"></a><code><span><span class="keyword">val</span> parse_date : 
  <span><span class="xref-unresolved">Stdlib</span>.String.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="xref-unresolved">CalendarLib</span>.Date.t, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Parse a string containing 8 digits as a date (in YYYYMMDD format). Non-digit characters are ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_start_date"><a href="#val-default_start_date" class="anchor"></a><code><span><span class="keyword">val</span> default_start_date : 
  <span>?relative_to:<span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">CalendarLib</span>.Date.t</span></code></div><div class="spec-doc"><p>Calculate the default start date for Forecast export, which is the 1st of the previous month (relative to today's date). The <code>relative_to</code> argument can be specified to allow for unit testing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_end_date"><a href="#val-default_end_date" class="anchor"></a><code><span><span class="keyword">val</span> default_end_date : 
  <span>?relative_to:<span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">CalendarLib</span>.Date.field <span class="xref-unresolved">CalendarLib</span>.Date.date</span></span></code></div><div class="spec-doc"><p>Calculate the default end date for Forecast export, which is the last day of the next month (relative to today's date). The <code>relative_to</code> argument can be specified to allow for unit testing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-group_by"><a href="#val-group_by" class="anchor"></a><code><span><span class="keyword">val</span> group_by : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a0</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a1</span> list</span> list</span></span></code></div><div class="spec-doc"><p>Group adjacent elements of a list together using a predicate</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sort_and_group_by"><a href="#val-sort_and_group_by" class="anchor"></a><code><span><span class="keyword">val</span> sort_and_group_by : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'key</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a0</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'key0</span> * <span><span class="type-var">'a1</span> list</span>)</span> list</span></span></code></div><div class="spec-doc"><p>Sort and then group elements of a list according to a key</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-splitAt"><a href="#val-splitAt" class="anchor"></a><code><span><span class="keyword">val</span> splitAt : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span> * <span><span class="type-var">'c</span> list</span></span></code></div><div class="spec-doc"><p><code>splitAt n xs</code> returns <code>(take n xs, drop n xs)</code> (i.e. the first <code>n</code> elements and the rest).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sum"><a href="#val-sum" class="anchor"></a><code><span><span class="keyword">val</span> sum : <span><span>float list</span> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Sum a list</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rollback_week"><a href="#val-rollback_week" class="anchor"></a><code><span><span class="keyword">val</span> rollback_week : <span><span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">CalendarLib</span>.Date.t</span></code></div><div class="spec-doc"><p>Roll a date back to a Monday. Leaves Mondays untouched.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rollforward_week"><a href="#val-rollforward_week" class="anchor"></a><code><span><span class="keyword">val</span> rollforward_week : 
  <span>?with_weekend:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">CalendarLib</span>.Date.t</span></code></div><div class="spec-doc"><p>Roll a date forward to a Friday. Leaves Fridays untouched. If <code>with_weekend</code> is <code>true</code>, then rolls forward to Sundays.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all_throttled"><a href="#val-all_throttled" class="anchor"></a><code><span><span class="keyword">val</span> all_throttled : <span>?max_concurrent:int <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a0</span> list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>all_throttled</code> is like <code>Lwt.all</code> but only resolves <code>max_concurrent</code> promises at a time.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gfm_escape"><a href="#val-gfm_escape" class="anchor"></a><code><span><span class="keyword">val</span> gfm_escape : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Escape a string such that characters show up correctly in (GitHub-Flavoured) Markdown. Note: this means that formatting etc. will be lost in the resulting post, and it'll purely appear as a string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_by"><a href="#val-max_by" class="anchor"></a><code><span><span class="keyword">val</span> max_by : <span>default:<span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b0</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a0</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b1</span></span></code></div><div class="spec-doc"><p>Get the maximum of a list using a key function</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contains"><a href="#val-contains" class="anchor"></a><code><span><span class="keyword">val</span> contains : <span>?case_sensitive:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if s2 is a substring of s1</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-take"><a href="#val-take" class="anchor"></a><code><span><span class="keyword">val</span> take : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p>Take the first n elements of a list</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-drop"><a href="#val-drop" class="anchor"></a><code><span><span class="keyword">val</span> drop : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p>Drop the first n elements of a list</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-split_at"><a href="#val-split_at" class="anchor"></a><code><span><span class="keyword">val</span> split_at : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a0</span> list</span> * <span><span class="type-var">'a1</span> list</span></span></code></div><div class="spec-doc"><p>Split a list after n elements. Effectively, <code>split_at n xs</code> returns <code>(take n
    xs, drop n xs)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transpose"><a href="#val-transpose" class="anchor"></a><code><span><span class="keyword">val</span> transpose : <span><span><span><span class="type-var">'a</span> list</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a0</span> list</span> list</span></span></code></div><div class="spec-doc"><p>Transpose a list of lists</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_file"><a href="#val-read_file" class="anchor"></a><code><span><span class="keyword">val</span> read_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p>Attempt to read text from a file. Returns <code>None</code> for various errors (e.g. if the file doesn't exist).</p></div></div></div></body></html>