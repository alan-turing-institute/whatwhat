<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ForecastRaw (whatwhat.Whatwhat.ForecastRaw)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.3.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">whatwhat</a> &#x00BB; <a href="../index.html">Whatwhat</a> &#x00BB; ForecastRaw</nav><header class="odoc-preamble"><h1>Module <code><span>Whatwhat.ForecastRaw</span></code></h1><p>Raw interface to Forecast. Returns typed data that is essentially the JSON form returned by Forecast.</p></header><nav class="odoc-toc"><ul><li><a href="#clients">Clients</a></li><li><a href="#projects">Projects</a></li><li><a href="#people">People</a></li><li><a href="#placeholders">Placeholders</a></li><li><a href="#entities">Entities</a></li><li><a href="#assignments">Assignments</a></li><li><a href="#get-the-schedule">Get the schedule</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-IntMap"><a href="#module-IntMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="IntMap/index.html">IntMap</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="clients"><a href="#clients" class="anchor"></a>Clients</h2><p>A Forecast <code>client</code> is what we usually call a programme, i.e. categories of projects.</p><div class="odoc-spec"><div class="spec type anchored" id="type-client"><a href="#type-client" class="anchor"></a><code><span><span class="keyword">type</span> client</span><span> = </span><span>{</span></code><ol><li id="type-client.id" class="def record field anchored"><a href="#type-client.id" class="anchor"></a><code><span>id : int;</span></code></li><li id="type-client.name" class="def record field anchored"><a href="#type-client.name" class="anchor"></a><code><span>name : string;</span></code></li><li id="type-client.archived" class="def record field anchored"><a href="#type-client.archived" class="anchor"></a><code><span>archived : bool;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_client"><a href="#val-show_client" class="anchor"></a><code><span><span class="keyword">val</span> show_client : <span><a href="#type-client">client</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h2 id="projects"><a href="#projects" class="anchor"></a>Projects</h2><p>Each Forecast <code>project</code> corresponds to a real-world project.</p><div class="odoc-spec"><div class="spec type anchored" id="type-project"><a href="#type-project" class="anchor"></a><code><span><span class="keyword">type</span> project</span><span> = </span><span>{</span></code><ol><li id="type-project.id" class="def record field anchored"><a href="#type-project.id" class="anchor"></a><code><span>id : int;</span></code></li><li id="type-project.harvest_id" class="def record field anchored"><a href="#type-project.harvest_id" class="anchor"></a><code><span>harvest_id : <span>int option</span>;</span></code></li><li id="type-project.client" class="def record field anchored"><a href="#type-project.client" class="anchor"></a><code><span>client : <span><a href="#type-client">client</a> option</span>;</span></code></li><li id="type-project.name" class="def record field anchored"><a href="#type-project.name" class="anchor"></a><code><span>name : string;</span></code></li><li id="type-project.code" class="def record field anchored"><a href="#type-project.code" class="anchor"></a><code><span>code : <span>string option</span>;</span></code></li><li id="type-project.tags" class="def record field anchored"><a href="#type-project.tags" class="anchor"></a><code><span>tags : <span>string list</span>;</span></code></li><li id="type-project.notes" class="def record field anchored"><a href="#type-project.notes" class="anchor"></a><code><span>notes : <span>string option</span>;</span></code></li><li id="type-project.color" class="def record field anchored"><a href="#type-project.color" class="anchor"></a><code><span>color : string;</span></code></li><li id="type-project.archived" class="def record field anchored"><a href="#type-project.archived" class="anchor"></a><code><span>archived : bool;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_project"><a href="#val-show_project" class="anchor"></a><code><span><span class="keyword">val</span> show_project : <span><a href="#type-project">project</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h2 id="people"><a href="#people" class="anchor"></a>People</h2><p>Each Forecast <code>person</code> corresponds to a real-world person. These may be members of REG or other commercial/university partners; these can be differentiated based on their <code>roles</code>.</p><div class="odoc-spec"><div class="spec type anchored" id="type-person"><a href="#type-person" class="anchor"></a><code><span><span class="keyword">type</span> person</span><span> = </span><span>{</span></code><ol><li id="type-person.id" class="def record field anchored"><a href="#type-person.id" class="anchor"></a><code><span>id : int;</span></code></li><li id="type-person.first_name" class="def record field anchored"><a href="#type-person.first_name" class="anchor"></a><code><span>first_name : string;</span></code></li><li id="type-person.last_name" class="def record field anchored"><a href="#type-person.last_name" class="anchor"></a><code><span>last_name : string;</span></code></li><li id="type-person.email" class="def record field anchored"><a href="#type-person.email" class="anchor"></a><code><span>email : <span>string option</span>;</span></code></li><li id="type-person.login" class="def record field anchored"><a href="#type-person.login" class="anchor"></a><code><span>login : string;</span></code></li><li id="type-person.roles" class="def record field anchored"><a href="#type-person.roles" class="anchor"></a><code><span>roles : <span>string list</span>;</span></code></li><li id="type-person.archived" class="def record field anchored"><a href="#type-person.archived" class="anchor"></a><code><span>archived : bool;</span></code></li><li id="type-person.weekly_capacity" class="def record field anchored"><a href="#type-person.weekly_capacity" class="anchor"></a><code><span>weekly_capacity : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Seconds per week. This is not used except in Forecast team export.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_person"><a href="#val-show_person" class="anchor"></a><code><span><span class="keyword">val</span> show_person : <span><a href="#type-person">person</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_person_name"><a href="#val-make_person_name" class="anchor"></a><code><span><span class="keyword">val</span> make_person_name : <span><a href="#type-person">person</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Construct the name of a person, which (for the purposes of whatwhat) is their first and last names joined by a space.</p></div></div><h2 id="placeholders"><a href="#placeholders" class="anchor"></a>Placeholders</h2><p>A placeholder on Forecast fulfils the same role as a person, but is not actually a person. Placeholders are used on Forecast to denote other information about projects, e.g. whether they need people on them.</p><div class="odoc-spec"><div class="spec type anchored" id="type-placeholder"><a href="#type-placeholder" class="anchor"></a><code><span><span class="keyword">type</span> placeholder</span><span> = </span><span>{</span></code><ol><li id="type-placeholder.id" class="def record field anchored"><a href="#type-placeholder.id" class="anchor"></a><code><span>id : int;</span></code></li><li id="type-placeholder.name" class="def record field anchored"><a href="#type-placeholder.name" class="anchor"></a><code><span>name : string;</span></code></li><li id="type-placeholder.roles" class="def record field anchored"><a href="#type-placeholder.roles" class="anchor"></a><code><span>roles : <span>string list</span>;</span></code></li><li id="type-placeholder.archived" class="def record field anchored"><a href="#type-placeholder.archived" class="anchor"></a><code><span>archived : bool;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_placeholder"><a href="#val-show_placeholder" class="anchor"></a><code><span><span class="keyword">val</span> show_placeholder : <span><a href="#type-placeholder">placeholder</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h2 id="entities"><a href="#entities" class="anchor"></a>Entities</h2><p>An entity can be a person or a placeholder. Each assignment in Forecast must be to one, and only one, entity.</p><div class="odoc-spec"><div class="spec type anchored" id="type-entity"><a href="#type-entity" class="anchor"></a><code><span><span class="keyword">type</span> entity</span><span> = </span></code><ol><li id="type-entity.Person" class="def variant constructor anchored"><a href="#type-entity.Person" class="anchor"></a><code><span>| </span><span><span class="constructor">Person</span> <span class="keyword">of</span> <a href="#type-person">person</a></span></code></li><li id="type-entity.Placeholder" class="def variant constructor anchored"><a href="#type-entity.Placeholder" class="anchor"></a><code><span>| </span><span><span class="constructor">Placeholder</span> <span class="keyword">of</span> <a href="#type-placeholder">placeholder</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_entity"><a href="#val-show_entity" class="anchor"></a><code><span><span class="keyword">val</span> show_entity : <span><a href="#type-entity">entity</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_entity_name"><a href="#val-get_entity_name" class="anchor"></a><code><span><span class="keyword">val</span> get_entity_name : <span><a href="#type-entity">entity</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the name of an entity. The name of a person is their first and last names joined together by a space. The name of a placeholder is &quot;Placeholder: &lt;name in Forecast&gt;&quot;.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_entity_roles"><a href="#val-get_entity_roles" class="anchor"></a><code><span><span class="keyword">val</span> get_entity_roles : <span><a href="#type-entity">entity</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Get the roles of an entity.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_entity_id"><a href="#val-get_entity_id" class="anchor"></a><code><span><span class="keyword">val</span> get_entity_id : <span><a href="#type-entity">entity</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the ID of an entity.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_entity_archived"><a href="#val-get_entity_archived" class="anchor"></a><code><span><span class="keyword">val</span> get_entity_archived : <span><a href="#type-entity">entity</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Get the archived status of an entity.</p></div></div><h2 id="assignments"><a href="#assignments" class="anchor"></a>Assignments</h2><p>An <code>assignment</code> refers to a period where an entity is placed on a project. The start and end dates are inclusive.</p><div class="odoc-spec"><div class="spec type anchored" id="type-assignment"><a href="#type-assignment" class="anchor"></a><code><span><span class="keyword">type</span> assignment</span><span> = </span><span>{</span></code><ol><li id="type-assignment.id" class="def record field anchored"><a href="#type-assignment.id" class="anchor"></a><code><span>id : int;</span></code></li><li id="type-assignment.project" class="def record field anchored"><a href="#type-assignment.project" class="anchor"></a><code><span>project : <a href="#type-project">project</a>;</span></code></li><li id="type-assignment.entity" class="def record field anchored"><a href="#type-assignment.entity" class="anchor"></a><code><span>entity : <a href="#type-entity">entity</a>;</span></code></li><li id="type-assignment.start_date" class="def record field anchored"><a href="#type-assignment.start_date" class="anchor"></a><code><span>start_date : <span class="xref-unresolved">CalendarLib</span>.Date.t;</span></code></li><li id="type-assignment.end_date" class="def record field anchored"><a href="#type-assignment.end_date" class="anchor"></a><code><span>end_date : <span class="xref-unresolved">CalendarLib</span>.Date.t;</span></code></li><li id="type-assignment.allocation" class="def record field anchored"><a href="#type-assignment.allocation" class="anchor"></a><code><span>allocation : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>This is measured in seconds per day.</p><span class="comment-delim">*)</span></div></li><li id="type-assignment.notes" class="def record field anchored"><a href="#type-assignment.notes" class="anchor"></a><code><span>notes : <span>string option</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_assignment"><a href="#val-show_assignment" class="anchor"></a><code><span><span class="keyword">val</span> show_assignment : <span><a href="#type-assignment">assignment</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h2 id="get-the-schedule"><a href="#get-the-schedule" class="anchor"></a>Get the schedule</h2><p>The main function of this module.</p><div class="odoc-spec"><div class="spec value anchored" id="val-get_the_schedule_async"><a href="#val-get_the_schedule_async" class="anchor"></a><code><span><span class="keyword">val</span> get_the_schedule_async : 
  <span><span class="label">start_date</span>:<span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">end_date</span>:<span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-client">client</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
   * <span><a href="#type-person">person</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
   * <span><a href="#type-placeholder">placeholder</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
   * <span><a href="#type-project">project</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
   * <span><a href="#type-assignment">assignment</a> list</span>)</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Retrieves all assignments from Forecast between the two given dates, as well as all other data required to make sense of the assignments, such as clients, people, placeholders, and projects. For an explanation of the data types involved, see the sections above.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_the_schedule"><a href="#val-get_the_schedule" class="anchor"></a><code><span><span class="keyword">val</span> get_the_schedule : 
  <span><span class="label">start_date</span>:<span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">end_date</span>:<span class="xref-unresolved">CalendarLib</span>.Date.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-client">client</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
  * <span><a href="#type-person">person</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
  * <span><a href="#type-placeholder">placeholder</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
  * <span><a href="#type-project">project</a> <a href="IntMap/index.html#type-t">IntMap.t</a></span>
  * <span><a href="#type-assignment">assignment</a> list</span></span></code></div></div></div></body></html>
