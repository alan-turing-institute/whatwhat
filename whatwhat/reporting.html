<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>reporting (whatwhat.reporting)</title><link rel="stylesheet" href="../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">whatwhat</a> &#x00BB; reporting</nav><header class="odoc-preamble"><h1 id="reporting-problems"><a href="#reporting-problems" class="anchor"></a>Reporting problems</h1><p>If you are looking specifically for an error code, you can skip the discussion here: just use your browser's find function to navigate to the code of interest.</p><p>Some error messages are quite self-explanatory so do not contain any suggestions for fixing them. If the guidance here is insufficient, please consider making an issue or PR to help the next person!</p></header><nav class="odoc-toc"><ul><li><a href="#overview">Overview</a></li><li><a href="#reading-data-from-forecast">Reading data from Forecast</a><ul><li><a href="#errors">Errors</a></li><li><a href="#warnings">Warnings</a></li><li><a href="#info-messages">Info messages</a></li><li><a href="#debug-messages">Debug messages</a></li></ul></li><li><a href="#reading-data-from-github">Reading data from GitHub</a><ul><li><a href="#errors_2">Errors</a></li><li><a href="#warnings_2">Warnings</a></li></ul></li><li><a href="#combining-data">Combining data</a><ul><li><a href="#errors_3">Errors</a></li><li><a href="#warnings_3">Warnings</a></li><li><a href="#other-ideas">Other ideas</a></li></ul></li><li><a href="#notifications">Notifications</a></li></ul></nav><div class="odoc-content"><h2 id="overview"><a href="#overview" class="anchor"></a>Overview</h2><p><a href="Whatwhat/index.html"><code>Whatwhat</code></a> retrieves and integrates data from two sources: GitHub and Forecast. These systems have been repurposed by us in order to manage our projects and so the &quot;true data model&quot; (representing real-world REG projects) is not necessarily faithfully represented by the data models of these systems. Thus, errors, omissions, and inconsistencies may occur.</p><p>We classify problems into <i>errors</i> and <i>warnings</i>:</p><ul><li>An <i>error</i> (E-code) occurs when the data retrieved from the data sources, while valid in the domain model of the data source, is not valid in the domain model of whatwhat and cannot be represented as a type returned by the library. When an error occurs, the entity causing the error is often ignored thereafter, which may lead to subsequent errors or warnings.</li><li>A <i>warning</i> (W-code) occurs when a valid representation is possible but is in some way or other problematic. Warnings should result in nudges for people to fix the problem.</li><li>An <i>information message</i> is used for commentary on potential problems. There aren't many of these yet, because we haven't implemented them.</li><li>A <i>debug message</i> is information intended purely for developer usage. There aren't many of these either.</li></ul><p>All of these are passed to the logging system, whose job is to then communicate them to the appropriate target. Errors and warnings may arise in three places:</p><ol><li>When reading the data from Forecast;</li><li>When reading the data from GitHub;</li><li>When combining the data from these two sources.</li></ol><p>The location at which these errors appear dictates the first number in the error code. So, for example, an issue with GitHub metadata usually has a code of the form E2xxx or W2xxx.</p><h2 id="reading-data-from-forecast"><a href="#reading-data-from-forecast" class="anchor"></a>Reading data from Forecast</h2><p>Forecast is authoritative for people and allocations, so the most likely sources of errors are projects.</p><h3 id="errors"><a href="#errors" class="anchor"></a>Errors</h3><p><b>E1001</b> The Forecast 'project code' field (which ought to hold the GitHub issue number X in the format <code>hut23-X</code>) is empty.</p><ul><li><i>Solution:</i> Add the project code. Note that the title of the Forecast project does not need to contain this info.</li></ul><p><b>E1002</b> The Forecast 'project code' field but does not have the correct format.</p><ul><li><i>Solution:</i> Edit the project code to conform to the format <code>hut23-X</code>, where <code>X</code> is the GitHub issue number.</li></ul><p><b>E1003</b> The email field of a person tagged with the 'REG' role on Forecast is empty.</p><ul><li><i>Solution:</i> Add the email. If the person is not supposed to be part of REG, then remove the tag from the person.</li><li>Note that this error can naturally occur for people who have not yet started (we create Forecast accounts ahead of time for new starters). In this case, the error can be ignored.</li></ul><p><b>E1004</b> The email field of a person tagged with the 'REG' role on Forecast is not a valid email address.</p><ul><li><i>Solution:</i> Correct the email. If the person is not supposed to be part of REG, then remove the tag from the person.</li><li>'Valid' in this case means 'matching <code>^[A-Za-z0-9._%+-]+@[A-Za-z0-9.+-]+\.[A-Za-z]{2,}$</code>', which is not quite accurate (the technical definition being <a href="https://www.rfc-editor.org/rfc/rfc5322">RFC 5322</a>). However, it is enough to catch empty emails and other typos. If you have a valid email that doesn't match this regex, please raise an issue.</li></ul><p><b>E1005</b> The project on Forecast has no client (in Forecast, a 'client' refers to what we usually call a 'programme').</p><ul><li><i>Solution:</i> Add the client on Forecast.</li></ul><h3 id="warnings"><a href="#warnings" class="anchor"></a>Warnings</h3><p><b>W1001</b> The 'project tags' field (which ought to hold the finance code) is empty.</p><ul><li><i>Solution:</i> Add the finance code (if known).</li></ul><p><b>W1002</b> The 'project tags' field has more than one entry.</p><ul><li><i>Solution:</i> Remove extraneous finance codes. If a project genuinely has two finance codes, it should be split up into two Forecast projects. (This will then raise a W1003.)</li></ul><p><b>W1003</b> Two projects exist with the same issue number in Forecast.</p><ul><li><i>Solution:</i> This happens naturally sometimes, e.g. when projects are split up into multiple components on Forecast. Ensure that this is <i>supposed</i> to be the case. If not, then fix it.</li><li>If you know for sure that this is a spurious warning, a manual exception can be added for specific Forecast projects; please raise an issue.</li></ul><h3 id="info-messages"><a href="#info-messages" class="anchor"></a>Info messages</h3><ul><li>When ignoring a person without the 'REG' tag.</li><li>When deleting an assignment to a person who has been removed.</li><li>When deleting an assignment to a project that has been removed.</li></ul><h3 id="debug-messages"><a href="#debug-messages" class="anchor"></a>Debug messages</h3><ul><li>When ignoring an archived person.</li></ul><h2 id="reading-data-from-github"><a href="#reading-data-from-github" class="anchor"></a>Reading data from GitHub</h2><p>All error codes under this section should begin with the number 2.</p><p>GitHub is authoritative for projects but the YAML metadata block is not part of the GitHub data model so leaves a lot of room for trouble.</p><p>For reference, the stages of a project, in order, are presently:</p><ul><li><code>Suggested</code></li><li><code>Proposal</code></li><li><code>Extra info needed</code></li><li><code>Project appraisal</code></li><li><code>Awaiting go/no-go</code></li><li><code>Finding people</code></li><li><code>Awaiting start</code></li><li><code>Active</code></li><li><code>Completion review</code></li><li><code>Done</code></li><li><code>Cancelled</code></li><li><code>Rejected</code></li></ul><p>and the YAML data block has the following fields:</p><ul><li><code>turing-project-code</code> <i>(Should be deprecated?)</i> Must be present; may be null, when the finance code is not known yet.</li><li><code>earliest-start-date</code> Must be present; may be null, when there is &quot;no earliest start date&quot;.</li><li><code>latest-start-date</code> Must be present; may not be null.</li><li><code>latest-end-date</code> Must be present; may be null, when there is &quot;no latest end date&quot;.</li><li><code>nominal-FTE-percent</code> Must be present; must be a non-negative number. A value of 100 represents 1 FTE.</li><li><code>max-FTE-percent</code> Must be present; may be null, meaning &quot;same as nominal&quot;. If present, must be a non-negative number.</li><li><code>min-FTE-percent</code> Must be present; may be null, meaning &quot;same as nominal&quot;. If present, must be a non-negative number.</li><li><code>FTE-months</code> OR <code>FTE-weeks</code> One (and only one) of these must be present. Must be an non-negative number.</li></ul><h3 id="errors_2"><a href="#errors_2" class="anchor"></a>Errors</h3><p><b>E2001</b> A metadata block cannot be found at all.</p><ul><li><i>Solution:</i> Add the metadata block. If it's already there, it's probably not being recognised. The metadata block must be separated from the rest of the issue description by three consecutive plus signs, i.e. <code>+++</code>. See any other project issue for an example.</li></ul><p><b>E2002</b> A metadata block was found, but is not valid YAML.</p><p><b>E2003</b> An unexpected metadata field is present.</p><p><b>E2004</b> A metadata field cannot be parsed because its value is invalid (e.g. the wrong type).</p><p><b>E2005</b> A metadata field is specified more than once.</p><p><b>E2006</b> Neither <code>FTE-months</code> nor <code>FTE-weeks</code> are given.</p><p><b>E2007</b> Both <code>FTE-months</code> and <code>FTE-weeks</code> are given.</p><p><b>E2008</b> A metadata field that cannot be null or empty is null or empty.</p><p><b>E2009</b> A compulsory metadata field is not present.</p><p><b>E2010</b> A project is in 'Finding People' or later, but the finance code is null or empty.</p><h3 id="warnings_2"><a href="#warnings_2" class="anchor"></a>Warnings</h3><p>None yet.</p><h2 id="combining-data"><a href="#combining-data" class="anchor"></a>Combining data</h2><p>All error codes under this section should begin with the number 3.</p><p>Even if both the GitHub and the Forecast data appear to satisfy the domain model, we may still have problems when they are combined.</p><h3 id="errors_3"><a href="#errors_3" class="anchor"></a>Errors</h3><p><b>E3001</b> A project on Forecast has a Hut23 issue number that is not found on the Hut23 GitHub repository.</p><ul><li><i>Solution:</i> If the project should be on there, move it there.</li><li>There is currently a bug in that <code>whatwhat</code> only fetches issues on the four 'main' columns of the project tracker (from Awaiting go/no-go through Active). So, E3001 will be issued for any project *not* on those four columns. It is not obvious exactly how to fix this.</li></ul><p><b>E3002</b> A project on Forecast has a finance code that is not contained in the list of finance codes in the GitHub metadata.</p><ul><li><i>Solution:</i> Check Forecast and GitHub projects for consistency.</li></ul><h3 id="warnings_3"><a href="#warnings_3" class="anchor"></a>Warnings</h3><p>Warnings occur when the allocations in Forecast do not match what is implied by the GitHub metadata.</p><p><b>W3001</b> A project is in &quot;Looking for people&quot; or later, but has no matching Forecast project.</p><ul><li><i>Solution:</i> Create a project on Forecast (or if it already exists, make sure its project code is correctly set; see also E1001).</li></ul><p><b>W3002</b> There are allocations to a project beyond its latest end date.</p><p><b>W3003</b> There are allocations to a project before its earliest start date.</p><ul><li><i>Solution:</i> Check that this is supposed to be the case. Adjust the allocations or the start/end date as necessary.</li></ul><p><b>W3004</b> The total resources allocated on Forecast deviates from the FTE-weeks or FTE-months specified on GitHub by more than 10%.</p><ul><li><i>Solution:</i> Speak to the person in charge of scheduling about it. Likely Forecast allocations need to be edited. To see <code>whatwhat</code>'s exact breakdown of the Forecast allocations, you can run <code>whatwhat project N</code> where <code>N</code> is the GitHub issue number.</li></ul><p><b>W3005</b> The run-rate resource at any time is lower than min-FTE-percent or higher than max-FTE-percent. <i>This warning is not yet implemented.</i></p><p><b>W3006</b> An individual has an allocation that is greater than 100%. <i>This warning is not yet implemented.</i></p><p><b>W3007</b> The project is in the &quot;Active&quot; column but there are no present allocations on Forecast.</p><p><b>W3008</b> There are allocations to a project but the project is not in the &quot;Active&quot; column.</p><p><b>W3009</b> The project is past its latest start date but is not in the &quot;Active&quot; column.</p><p><b>W3010</b> A GitHub account could not be found for an active REG person on Forecast (i.e. having the 'REG' role, and not assigned to UNAVAILABLE).</p><ul><li><i>Solution:</i> If the person is not in REG any more, then adjust their Forecast assignments. If they are not on the Turing GitHub organisation yet, get them added. If neither of those are applicable, a manual exception must be added inside the <code>Schedule.get_matching_gh_person_opt</code> function: let the <code>whatwhat</code> developers know.</li></ul><p><b>W3011</b> The project programme ('client' on Forecast, 'tags' on GitHub) could not be matched.</p><p><b>W3012</b> The project names on Forecast and GitHub could not be matched.</p><h3 id="other-ideas"><a href="#other-ideas" class="anchor"></a>Other ideas</h3><p>None of these are implemented yet.</p><ul><li>A project is within T + delta of its latest start date but there are no allocations</li><li>A project is within T + delta of its latest start date but is not &quot;Awaiting start&quot;</li><li>A project is &quot;Awaiting start&quot; but the total allocation is less than the FTE-weeks (within some delta)</li><li>A person's allocation will be less than 100% at T + delta</li><li>A person's allocation to a project will change within in T + delta</li><li>A project's allocations will change within T + delta</li></ul><h2 id="notifications"><a href="#notifications" class="anchor"></a>Notifications</h2><p>Currently, notifications are posted as GitHub comments on the issue belonging to the respective project.</p><p>Issues that cannot be easily tied to a specific project are currently not reported to anybody (although they can be seen in the terminal output). This is probably a bug.</p><p>Other possibilities for notifications (which are not implemented yet) are:</p><ul><li>Fallback (email): A hard-coded person if the Scheduler cannot be found</li><li>The Scheduler (GitHub): The people listed in the GitHub service area for Scheduling</li><li>Project Shepherd (GitHub): Anyone listed in the project GitHub issue</li><li>Project Team (email): Anyone allocated to the project in the next six months</li><li>Programme Shepherd (GitHub): Anyone listed in the Programme Service area</li><li>Programe Lead (Forecast): Anyone allocated to the Programme Service area in the next six months.</li><li>The On-Call (Forecast): The person referred to by a particular assignment</li></ul></div></body></html>